{
  "gitSyncId": "68bf46d3c4f12e2bf17c39f9_52f7c781-607c-4108-9b23-79401aec7bad",
  "id": "estados_list_campas_2",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "WITH cte_summary AS (\nSELECT\n    a.idcampa,\n    COUNT(\n        -- La expresi칩n CASE retorna 1 si al menos una columna tiene el valor 'PENDIENTE'\n        -- y NULL si ninguna lo tiene. COUNT() ignora los valores NULL.\n        CASE\n            WHEN a.ranking = 'PENDIENTE' OR\n                 a.segmento_gestion = 'PENDIENTE' OR\n                 a.liquidacion = 'PENDIENTE' OR\n                 a.comision = 'PENDIENTE' OR\n                 a.bonos = 'PENDIENTE' OR\n                 a.salida_anticipada = 'PENDIENTE' OR\n                 a.condicionamiento = 'PENDIENTE' OR\n                 a.proceso_alta = 'PENDIENTE' OR\n\t\t\t\t\t\t\t\t a.recuperable = 'PENDIENTE' OR\n\t\t\t\t\t\t\t\t a.objetivo_bono = 'PENDIENTE'\n            THEN 1\n            ELSE NULL\n        END\n    ) AS pendientes_amount\nFROM\n    sales_management.dim_states a\nLEFT JOIN sales_management.dim_campaigns b ON a.idcampa = b.idcampa침a\n\tWHERE \n\tb.cartera = ANY({{MultiSelect1.selectedOptionValues}})\n\tAND b.state_report = 1 -- a.idcampa IN (240,233,228,213,89, 235)\n\t\nGROUP BY\n    a.idcampa\nORDER BY\n    a.idcampa)\t\nSELECT b.nombrecampa침a,a.*  \nFROM cte_summary a\nINNER JOIN sales_management.dim_campaigns b ON a.idcampa = b.idcampa침a ;\t\t\n\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "bi_dimension",
      "isAutoGenerated": false,
      "name": "bi_dimension",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "list_campas_2",
    "pageId": "estados",
    "runBehaviour": "AUTOMATIC",
    "userSetOnLoad": false
  }
}